
كيف يعمل ملف match_game_page.dart
How does the matching_game_page.dart work

دعنا نتتبع رحلة المستخدم في اختبار التطابق، بدءًا من فتح الصفحة وصولًا إلى الانتقال للسؤال التالي، مع التركيز على العمليات والوظائف الأساسية دون

الخوض في تفاصيل الأكواد.

1. فتح صفحة الاختبار:

عندما يختار المستخدم خيار "لعبة المطابقة" من الصفحة الرئيسية، يتم فتحه صفحة جديدة مخصصة لهذا الاختبار.

تهيئة الصفحة: عند فتح الصفحة، تبدأ عملية تحميل البيانات اللازمة للاختبار.

جلب الأسماء: يتم استدعاء وظيفة لجلب قائمة بالأسماء والصور والأصوات من قاعدة البيانات (جدول الأسماء).

تهيئة حالة اللعبة: يتم إنشاء "مدير" خاص باللعبة يحتفظ بحالة الاختبار (السؤال الحالي، الخيارات، النتيجة، إلخ).

تحديد السؤال الأول: يختار "مدير" اللعبة بشكل عشوائي أول اسم ليتم عرضه في السؤال الأول.

إنشاء خيارات الإجابة: يقوم "مدير" اللعبة بإنشاء قائمة بخيارات الصور، تتضمن الصورة الصحيحة للاسم المحدد وثلاث صور أخرى بشكل عشوائي من بين جميع الأسماء. يتم ترتيب هذه الخيارات عشوائيًا.

تشغيل صوت السؤال: يتم تشغيل الصوت الخاص بالاسم المعروض في السؤال الأول.

2. عرض السؤال والخيارات:

يتم عرض الاسم (أو صورته/صوته) في مكان بارز في الصفحة كـ "السؤال".

يتم عرض قائمة خيارات الصور الأربعة أسفل السؤال.

يظهر أيضًا عداد يوضح عدد الأسئلة الكلية وعدد الأسئلة التي تمت الإجابة عليها والنتيجة الحالية.

3. تفاعل المستخدم:

يستمع المستخدم إلى صوت الاسم المعروض (إذا كان الصوت جزءًا من السؤال).

يفحص المستخدم الصور المعروضة في الخيارات.

يختار المستخدم الصورة التي يعتقد أنها تطابق الاسم المعروض بالضغط عليها.

4. فحص الإجابة:

عندما يختار المستخدم صورة، يتم استدعاء وظيفة لفحص الإجابة.

مقارنة الاختيار: تقارن هذه الوظيفة الصورة التي اختارها المستخدم بالصورة الصحيحة للاسم المعروض.

تحديد النتيجة:

إجابة صحيحة: إذا كانت الصورة المختارة هي الصورة الصحيحة:

يتم تحديث حالة اللعبة لتسجيل أن الإجابة صحيحة.

يتم زيادة عدد الإجابات الصحيحة (النتيجة).

يتم إعلام واجهة المستخدم بالتغيير (بما في ذلك تحديث النتيجة).

يتم تشغيل صوت "صحيح".

إجابة خاطئة: إذا كانت الصورة المختارة ليست الصورة الصحيحة:

يتم تحديث حالة اللعبة لتسجيل أن الإجابة خاطئة.

يتم إعلام واجهة المستخدم بالتغيير.

يتم تشغيل صوت "خطأ".

5. فترة الانتظار والتوقف:

بعد فحص الإجابة، تبدأ فترة قصيرة من التوقف (مثلاً ثانيتين).

تعطيل التفاعل: خلال هذه الفترة، يتم تعطيل إمكانية تفاعل المستخدم مع أي من الصور أو عناصر الشاشة لمنعه من المقاطعة.

عرض التقييم المرئي: يتم تمييز الصورة الصحيحة (باللون الأخضر) والصورة التي اختارها المستخدم إذا كانت خاطئة (باللون الأحمر) لإعطاء المستخدم تقييمًا مرئيًا سريعًا.

تشغيل صوت الإجابة: يتم تشغيل صوت "صحيح" أو "خطأ" خلال هذه الفترة.

6. الانتقال إلى السؤال التالي:

بعد انتهاء فترة التوقف:

تحديد السؤال التالي: يختار "مدير" اللعبة بشكل عشوائي اسمًا جديدًا من قائمة الأسماء لم يتم استخدامه بعد.

إنشاء خيارات جديدة: يقوم "مدير" اللعبة بإنشاء قائمة خيارات الصور الجديدة للسؤال التالي.

تحديث واجهة المستخدم: يتم تحديث واجهة المستخدم لعرض السؤال الجديد وخياراته.

تشغيل صوت السؤال الجديد: يتم تشغيل الصوت الخاص بالاسم الجديد.

إعادة تمكين التفاعل: يتم تمكين تفاعل المستخدم مع الصور استعدادًا للسؤال التالي.

7. نهاية الاختبار:

تتكرر الخطوات من 3 إلى 6 حتى يتم استعراض جميع الأسماء الموجودة في القائمة.

عند الوصول إلى نهاية القائمة، ينتهي الاختبار.

عرض النتيجة النهائية: يتم عرض النتيجة النهائية للمستخدم (عدد الإجابات الصحيحة من العدد الكلي للأسئلة).

خيارات ما بعد الاختبار: يتم إعطاء المستخدم خيارات مثل "إعادة اللعب" أو "العودة إلى القائمة الرئيسية".



الوظائف (Functions) الرئيسية:


_loadNouns(): لجلب الأسماء من قاعدة البيانات.

_nextQuestion(): لتحديد السؤال التالي وإنشاء الخيارات.

_generateImageOptions(): لإنشاء قائمة خيارات الصور.

playCurrentNounAudio(): لتشغيل صوت السؤال الحالي.

playSound(): لتشغيل مؤثرات صوتية (صحيح/خطأ).

checkAnswer(): لفحص إجابة المستخدم وتحديث حالة اللعبة وتشغيل الصوت المناسب.

_showGameOverDialog(): لعرض شاشة نهاية الاختبار.

_resetGame(): لإعادة تشغيل الاختبار.
